/* Quill – Ghostwriter-style: minimal UI, menu bar + toolbar, 80-column editor */

:root {
  --ws-zoom: 1;
  --ws-bg: #252526;
  --ws-canvas-bg: #2d2d30;
  --ws-side-bg: #3c3c3c;
  --ws-fg: #d4d4d4;
  --ws-status-bg: #3c3c3c;
  --ws-status-fg: #d4d4d4;
  --ws-ruler-fg: #858585;
  --ws-menu-fg: #858585;
  --ws-cursor-color: #d4d4d4;
  --ws-block-bg: #37373d;
  --ws-font: "IBM Plex Mono", "Liberation Mono", "Courier New", monospace;
  --ws-char-width: 1ch;
  --ws-line-height: 1.2;
  --ws-cols: 80;
  --ws-rows: 22;
  --ws-menubar-bg: #2d2d30;
  --ws-menubar-fg: #cccccc;
  --ws-menubar-hover: #094771;
  --ws-dropdown-bg: #252526;
  --ws-dropdown-border: #454545;
  --ws-toolbar-bg: #2d2d30;
  --ws-toolbar-fg: #cccccc;
  --ws-toolbar-hover: #094771;
  --ws-link: #6eb3f7;
}

/* Light theme */
[data-theme="light"] {
  --ws-bg: #e8e8e8;
  --ws-canvas-bg: #ffffff;
  --ws-side-bg: #e0e0e0;
  --ws-fg: #333333;
  --ws-status-bg: #e8e8e8;
  --ws-status-fg: #333333;
  --ws-ruler-fg: #666666;
  --ws-menu-fg: #555555;
  --ws-cursor-color: #333333;
  --ws-block-bg: #e0e0e0;
  --ws-menubar-bg: #eaeaea;
  --ws-menubar-fg: #333333;
  --ws-menubar-hover: #0e639c;
  --ws-dropdown-bg: #f5f5f5;
  --ws-dropdown-border: #d0d0d0;
  --ws-toolbar-bg: #eaeaea;
  --ws-toolbar-fg: #333333;
  --ws-toolbar-hover: #0e639c;
  --ws-link: #0e639c;
}

/* Synthwave (neon purple/cyan/pink) */
[data-theme="synthwave"] {
  --ws-bg: #241b2f;
  --ws-canvas-bg: #2b213a;
  --ws-side-bg: #1a1033;
  --ws-fg: #f92aad;
  --ws-status-bg: #241b2f;
  --ws-status-fg: #72f1b8;
  --ws-ruler-fg: #fede5d;
  --ws-menu-fg: #72f1b8;
  --ws-cursor-color: #fede5d;
  --ws-block-bg: #7e22ce;
  --ws-menubar-bg: #1a1033;
  --ws-menubar-fg: #72f1b8;
  --ws-menubar-hover: #7e22ce;
  --ws-dropdown-bg: #2b213a;
  --ws-dropdown-border: #f92aad;
  --ws-toolbar-bg: #1a1033;
  --ws-toolbar-fg: #72f1b8;
  --ws-toolbar-hover: #7e22ce;
  --ws-link: #f92aad;
}

/* Green terminal (matrix/CRT) */
[data-theme="terminal"] {
  --ws-bg: #0d1117;
  --ws-canvas-bg: #161b22;
  --ws-side-bg: #0d1117;
  --ws-fg: #3fb950;
  --ws-status-bg: #161b22;
  --ws-status-fg: #7ee787;
  --ws-ruler-fg: #238636;
  --ws-menu-fg: #7ee787;
  --ws-cursor-color: #7ee787;
  --ws-block-bg: #21262d;
  --ws-menubar-bg: #161b22;
  --ws-menubar-fg: #7ee787;
  --ws-menubar-hover: #238636;
  --ws-dropdown-bg: #0d1117;
  --ws-dropdown-border: #30363d;
  --ws-toolbar-bg: #161b22;
  --ws-toolbar-fg: #7ee787;
  --ws-toolbar-hover: #238636;
  --ws-link: #7ee787;
}

* {
  box-sizing: border-box;
}

html, body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  min-height: 100vh;
  min-width: 100vw;
  background: var(--ws-bg);
  color: var(--ws-fg);
  font-family: var(--ws-font);
  font-size: calc(16px * var(--ws-zoom));
  overflow: hidden;
}

#ws-app {
  width: 100%;
  height: 100%;
  min-height: 0;
  overflow: hidden;
}

.ws-screen {
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
  min-height: 0;
  margin: 0;
  padding: 0.5rem 0.5rem 1.25rem 0.5rem;
  background: var(--ws-bg);
  position: relative;
  box-sizing: border-box;
}

/* Word count and zoom (in menubar top right) */
.ws-status-wordcount,
.ws-status-zoom {
  white-space: nowrap;
}

/* Menu bar (Ghostwriter-style) */
.ws-menubar {
  flex-shrink: 0;
  position: relative;
  background: var(--ws-menubar-bg);
  color: var(--ws-menubar-fg);
  font-size: 0.9rem;
  user-select: none;
  z-index: 50;
}

.ws-menubar-inner {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 0;
  padding: 0 0.25rem;
  min-height: 2rem;
  flex-wrap: nowrap;
}

.ws-menubar-left {
  display: flex;
  align-items: center;
  gap: 0;
}

.ws-menubar-right {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  font-size: 0.85rem;
  color: var(--ws-menubar-fg);
  opacity: 0.9;
  font-variant-numeric: tabular-nums;
}

.ws-menubar-sep {
  width: 1px;
  height: 1.2em;
  margin: 0 0.5rem;
  background: var(--ws-dropdown-border);
  flex-shrink: 0;
}

.ws-menu-item {
  padding: 0.35rem 0.6rem;
  cursor: default;
  border-radius: 2px;
}

.ws-menu-item:hover,
.ws-menu-item[aria-expanded="true"],
.ws-menu-item-keyboard-focus {
  background: var(--ws-menubar-hover);
  color: #fff;
}

/* Dropdowns */
.ws-dropdown {
  position: absolute;
  top: 100%;
  left: 0;
  min-width: 12rem;
  padding: 0.25rem 0;
  background: var(--ws-dropdown-bg);
  border: 1px solid var(--ws-dropdown-border);
  border-radius: 4px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
  z-index: 100;
}

.ws-dropdown[hidden] {
  display: none !important;
}

.ws-dropdown button {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 2rem;
  width: 100%;
  padding: 0.4rem 1rem;
  border: none;
  background: transparent;
  color: var(--ws-fg);
  font-family: var(--ws-font);
  font-size: 0.85rem;
  text-align: left;
  cursor: default;
}

.ws-dropdown button:hover {
  background: var(--ws-menubar-hover);
  color: #fff;
}

.ws-menuitem-label {
  flex: 1;
}

.ws-menuitem-shortcut {
  font-size: 0.8em;
  opacity: 0.8;
  font-variant-numeric: tabular-nums;
}

.ws-dropdown hr {
  margin: 0.25rem 0.5rem;
  border: none;
  border-top: 1px solid var(--ws-dropdown-border);
}

/* Toolbar buttons (inline in menu bar) */
.ws-toolbtn {
  padding: 0.3rem 0.6rem;
  border: 1px solid transparent;
  border-radius: 4px;
  background: transparent;
  color: var(--ws-toolbar-fg);
  font-family: var(--ws-font);
  font-size: 0.85rem;
  cursor: default;
}

.ws-toolbtn:hover {
  background: var(--ws-toolbar-hover);
  color: #fff;
  border-color: var(--ws-toolbar-hover);
}

.ws-toolbtn-inline {
  margin: 0 0.1rem;
}

.ws-toolbar-sep {
  width: 1px;
  height: 1.2em;
  margin: 0 0.25rem;
  background: var(--ws-dropdown-border);
  flex-shrink: 0;
}

.ws-toolbar-zoom {
  min-width: 2.5rem;
  padding: 0 0.25rem;
  text-align: center;
  font-variant-numeric: tabular-nums;
  font-size: 0.85rem;
  color: var(--ws-toolbar-fg);
}

/* Ruler – 80 cols, centered */
.ws-ruler {
  padding: 0 2px;
  height: 1.2em;
  min-height: 1.2em;
  color: var(--ws-ruler-fg);
  flex-shrink: 0;
  white-space: pre;
  font-variant-numeric: tabular-nums;
  width: calc(var(--ws-cols) * var(--ws-char-width));
  min-width: calc(var(--ws-cols) * var(--ws-char-width));
  margin-left: auto;
  margin-right: auto;
  overflow: hidden;
  box-sizing: border-box;
}

/* Editor area – 80 cols, centered, scrollable; extra right padding so last char isn’t clipped */
.ws-content-area {
  flex: 1;
  min-height: 0;
  position: relative;
  display: flex;
  flex-direction: column;
}
.ws-preview-wrap {
  display: none;
  flex: 1;
  min-height: 0;
  overflow: auto;
  padding: 1rem 2rem 2rem;
  width: 100%;
  max-width: 50rem;
  margin-left: auto;
  margin-right: auto;
  box-sizing: border-box;
}
.ws-content-area.preview-mode .ws-editor-wrap { display: none; }
.ws-content-area.preview-mode .ws-preview-wrap { display: block; }
.ws-preview {
  font-family: var(--ws-font);
  color: var(--ws-fg);
  line-height: 1.6;
  word-wrap: break-word;
}
.ws-preview h1 { font-size: 1.75rem; margin: 1rem 0 0.5rem; font-weight: bold; }
.ws-preview h2 { font-size: 1.4rem; margin: 0.9rem 0 0.4rem; font-weight: bold; }
.ws-preview h3 { font-size: 1.15rem; margin: 0.8rem 0 0.35rem; font-weight: bold; }
.ws-preview p { margin: 0.5rem 0; }
.ws-preview ul, .ws-preview ol { margin: 0.5rem 0; padding-left: 1.5rem; }
.ws-preview code { background: var(--ws-block-bg); padding: 0.15em 0.35em; border-radius: 3px; font-size: 0.9em; }
.ws-preview pre { background: var(--ws-block-bg); padding: 0.75rem; overflow-x: auto; margin: 0.5rem 0; border-radius: 4px; }
.ws-preview pre code { background: none; padding: 0; }
.ws-preview strong { font-weight: bold; }
.ws-preview em { font-style: italic; }
.ws-preview a { color: var(--ws-link); }
.ws-preview a:hover { text-decoration: underline; }
.ws-preview hr { border: none; border-top: 1px solid var(--ws-dropdown-border); margin: 1rem 0; }
.ws-dialog-font-row { margin-bottom: 1rem; }
.ws-font-select {
  width: 100%;
  padding: 0.4rem 0.5rem;
  font-size: 0.95rem;
  background: var(--ws-status-bg);
  color: var(--ws-fg);
  border: 1px solid var(--ws-dropdown-border);
  border-radius: 4px;
}

.ws-editor-wrap {
  flex: 1;
  position: relative;
  overflow-x: hidden;
  overflow-y: auto;
  min-height: 0;
  width: calc(var(--ws-cols) * var(--ws-char-width) + 1ch);
  min-width: calc(var(--ws-cols) * var(--ws-char-width) + 1ch);
  margin-left: auto;
  margin-right: auto;
  box-sizing: border-box;
  padding-top: 2px;
  padding-right: 0.1em;
  background: var(--ws-canvas-bg);
}

.ws-text {
  margin: 0;
  padding: 2px 0.15em 2px 2px;
  padding-right: 0.25em; /* breathing room so last character isn't cut off */
  min-height: 100%;
  white-space: pre;
  word-wrap: normal;
  overflow-wrap: normal;
  font-size: 1rem;
  line-height: var(--ws-line-height);
  tab-size: 8;
  width: calc(var(--ws-cols) * var(--ws-char-width));
  max-width: 100%;
  overflow-x: hidden;
  color: var(--ws-fg);
  background: transparent;
  outline: none;
  border: none;
  caret-color: transparent;
  box-sizing: border-box;
}

.ws-text::before {
  content: "";
  display: table;
}

/* Cursor – drawn by JS as a block cursor */
.ws-cursor {
  position: absolute;
  width: var(--ws-char-width);
  height: 1em;
  background: var(--ws-cursor-color);
  opacity: 0.9;
  pointer-events: none;
  top: 0;
  left: 0;
  transition: none;
}

.ws-cursor.blink {
  animation: ws-blink 1s step-end infinite;
}

@keyframes ws-blink {
  50% { opacity: 0.3; }
}

/* No border/outline on 80-column editor area */
#ws-text:focus {
  outline: none;
}

/* New document / unsaved changes dialog */
.ws-dialog-overlay {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.6);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 110;
  padding: 1rem;
}
.ws-dialog-overlay[aria-hidden="true"] {
  display: none;
}
.ws-dialog-overlay[aria-hidden="false"] {
  display: flex;
}
.ws-dialog-box {
  background: var(--ws-bg);
  border: 1px solid var(--ws-dropdown-border);
  color: var(--ws-fg);
  font-family: var(--ws-font);
  min-width: 20rem;
  max-width: 28rem;
  padding: 1.25rem;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
}
.ws-dialog-title {
  font-weight: bold;
  font-size: 1rem;
  margin-bottom: 0.5rem;
}
.ws-dialog-message {
  margin: 0 0 1.25rem 0;
  font-size: 0.9rem;
  line-height: 1.4;
  color: var(--ws-fg);
}
.ws-dialog-buttons {
  display: flex;
  gap: 0.5rem;
  justify-content: flex-end;
  flex-wrap: wrap;
}
.ws-dialog-btn {
  padding: 0.4rem 0.75rem;
  border: 1px solid var(--ws-dropdown-border);
  border-radius: 4px;
  background: var(--ws-status-bg);
  color: var(--ws-fg);
  font-family: var(--ws-font);
  font-size: 0.9rem;
  cursor: default;
}
.ws-dialog-btn:hover {
  background: var(--ws-menubar-hover);
  color: #fff;
  border-color: var(--ws-menubar-hover);
}
.ws-dialog-btn-primary {
  background: var(--ws-menubar-hover);
  color: #fff;
  border-color: var(--ws-menubar-hover);
}

